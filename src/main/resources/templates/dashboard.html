<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/style.css">
</head>
<body>
<nav th:replace="~{navbar :: navbar}"></nav>
<div class="container">
  <nav th:replace="~{leftnavbar.html :: leftnavbar}"></nav>
  <div class="content" style="padding: 20px">
    <h2 th:text="${project.name}" style="text-align: center; margin: 0 auto; margin-bottom: 20px;"></h2>
    <table class="table">
      <thead>
      <tr>
        <th colspan="3" th:text="${project.content}"></th>
      </tr>
      </thead>
      <tbody>
      <tr>
        <td>프로젝트 상태</td>
        <td colspan="2" th:text="${project.status}"></td>
      </tr>
      </tbody>
    </table>
    <h3 style="text-align: center; margin-bottom: 20px; margin-top: 20px;">태그 관리</h3>
    <form th:action="@{/tag/tagCreate/{seq}(seq=${projectSeq})}" th:object="${tag}" method="post">
      <label for="tagForm" class="form-label">태그 생성</label>
      <div class="input-group mb-3">
      <input type="text" class="form-control" th:classappend="${error != null } ? 'is-inalid'" id="tagForm" th:field="*{name}">
      <button class="btn btn-outline-secondary" type="submit">생성</button>
      </div>
      <div class="invalid-feedback" th:if="${error}" th:errors="*{name}"></div>
      <div style="margin-bottom: 20px;">최소 1글자 이상, 중복된 이름은 안됩니다.</div>
    </form>
    <div>태그 목록</div>
  <div th:each="tagList : ${tags}">
    <form th:action="@{/tag/delete/{tagSeq}/{seq}(tagSeq=${tagList.seq}, seq=${projectSeq})}" method="post">
      <div class="input-group mb-3">
        <input type="text" class="form-control" id="taglist" readonly th:value="${tagList.name}">
        <button type="submit" class="btn btn-outline-secondary" >X</button>
      </div>
    </form>
  </div>
  </div>
  <div class="content2" style="padding: 20px">
    <h2 style="text-align: center; margin-bottom: 20px">프로젝트 현황</h2>
    <div th:if="${VERY_HIGH != null}" class="progress" role="progressbar" aria-valuemin="0">
      <div class="progress-bar bg-danger" th:style="'width:' + (${VERY_HIGH}/${allStatus}*100) + '%;'">매우 높음</div>
    </div>
    <div th:if="${HIGH != null}" class="progress" role="progressbar" aria-valuemin="0">
      <div class="progress-bar" th:style="'width:' + (${HIGH}/${allStatus}*100) +'%; background-color: #E64848'">높음</div>
    </div>
    <div th:if="${MEDIUM != null}" class="progress" role="progressbar" th:aria-valuenow="${MEDIUM}" aria-valuemin="0" th:aria-valuemax="${allStatus}">
      <div class="progress-bar text-dark" th:style="'width:' + (${MEDIUM}/${allStatus}*100) + '%; background-color: #CFE8A9'">보통</div>
    </div>
    <div th:if="${VERY_LOW != null}" class="progress" role="progressbar" aria-valuemin="0">
      <div class="progress-bar text-dark" th:style="'width:' + (${VERY_LOW}/${allStatus}*100) + '%; background-color: #FFFDE3'">매우 낮음</div>
    </div>
    <div th:if="${LOW != null}" class="progress" role="progressbar" aria-valuemin="0">
      <div class="progress-bar text-dark" th:style="'width:' + (${LOW}/${allStatus}*100) + '%; background-color: #E4DCCF'">낮음</div>
    </div>
    <div th:if="${NONE != null}" class="progress" role="progressbar" th:aria-valuenow="${NONE}" aria-valuemin="0" th:aria-valuemax="${allStatus}">
      <div class="progress-bar bg-success" th:style="'width:' + (${NONE}/${allStatus}*100) + '%'">없음</div>
    </div>
    <h2 style="text-align: center; margin-bottom: 20px; margin-top: 20px">프로젝트 멤버</h2>
    <ul class="list-group list-group-flush" style="margin-left: auto; margin-right: auto; width: 50% !important;">
      <div th:each="list : ${members}">
        <li class="list-group-item" th:text="${list.name}"></li>
      </div>
    </ul>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>

</body>
</html>